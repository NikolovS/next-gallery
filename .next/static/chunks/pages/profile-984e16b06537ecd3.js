(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{9344:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return c(8812)}])},8812:function(h,b,a){"use strict";a.r(b);var i=a(7568),j=a(6042),c=a(4051),k=a.n(c),l=a(5893),d=a(9669),m=a.n(d),e=a(5152),f=a.n(e),n=a(1163),g=a(1664),o=a.n(g),p=a(7294),q=a(1749),r=a(8463),s=a(2822),t=a(998),u=a(5757),v=a(2318),w=a(8101),x=a(282),y=a(1419),z=a(8766),A=a(5789),B=a(9629),C=a(7536),D=a(6935),E=a(1955);function F(){var f,d=(0,p.useContext)(z.y),g=d.state,G=d.dispatch,a=(0,C.cI)(),h=a.handleSubmit,b=a.control,H=a.formState.errors,I=a.setValue,e=(0,D.Ds)(),J=e.enqueueSnackbar,K=e.closeSnackbar,L=(0,n.useRouter)(),c=(0,B.Z)(),M=g.userInfo;(0,p.useEffect)(function(){if(!M)return L.push("/login");I("name",M.name),I("email",M.email)},[]);var F=(f=(0,i.Z)(k().mark(function a(b){var c,d,e,f,g;return k().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=b.name,d=b.email,e=b.password,f=b.confirmPassword,K(),!(e!==f)){a.next=5;break}return J("Passwords don't match",{variant:"error"}),a.abrupt("return");case 5:return a.prev=5,a.next=8,m().put("/api/users/profile",{name:c,email:d,password:e},{headers:{authorization:"Bearer ".concat(M.token)}});case 8:G({type:"USER_LOGIN",payload:g=a.sent.data}),E.Z.set("userInfo",JSON.stringify(g)),J("Profile updated successfully",{variant:"success"}),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(5),J((0,y.b)(a.t0),{variant:"error"});case 17:case"end":return a.stop()}},a,null,[[5,14]])})),function(a){return f.apply(this,arguments)});return(0,l.jsx)(A.Z,{title:"Profile",children:(0,l.jsxs)(q.Z,{container:!0,spacing:1,children:[(0,l.jsx)(q.Z,{item:!0,md:3,xs:12,children:(0,l.jsx)(r.Z,{className:c.section,children:(0,l.jsxs)(s.Z,{children:[(0,l.jsx)(o(),{href:"/profile",passHref:!0,children:(0,l.jsx)(t.Z,{selected:!0,button:!0,component:"a",children:(0,l.jsx)(u.Z,{primary:"User Profile"})})}),(0,l.jsx)(o(),{href:"/order-history",passHref:!0,children:(0,l.jsx)(t.Z,{button:!0,component:"a",children:(0,l.jsx)(u.Z,{primary:"Order History"})})})]})})}),(0,l.jsx)(q.Z,{item:!0,md:9,xs:12,children:(0,l.jsx)(r.Z,{className:c.section,children:(0,l.jsxs)(s.Z,{children:[(0,l.jsx)(t.Z,{children:(0,l.jsx)(v.Z,{component:"h1",variant:"h1",children:"Profile"})}),(0,l.jsx)(t.Z,{children:(0,l.jsx)("form",{onSubmit:h(F),className:c.form,children:(0,l.jsxs)(s.Z,{children:[(0,l.jsx)(t.Z,{children:(0,l.jsx)(C.Qr,{name:"name",control:b,defaultValue:"",rules:{required:!0,minLength:2},render:function(a){var b=a.field;return(0,l.jsx)(w.Z,(0,j.Z)({variant:"outlined",fullWidth:!0,id:"name",label:"Name",inputProps:{type:"name"},error:Boolean(H.name),helperText:H.name?"minLength"===H.name.type?"Name length is more than 1":"Name is required":""},b))}})}),(0,l.jsx)(t.Z,{children:(0,l.jsx)(C.Qr,{name:"email",control:b,defaultValue:"",rules:{required:!0,pattern:/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/},render:function(a){var b=a.field;return(0,l.jsx)(w.Z,(0,j.Z)({variant:"outlined",fullWidth:!0,id:"email",label:"Email",inputProps:{type:"email"},error:Boolean(H.email),helperText:H.email?"pattern"===H.email.type?"Email is not valid":"Email is required":""},b))}})}),(0,l.jsx)(t.Z,{children:(0,l.jsx)(C.Qr,{name:"password",control:b,defaultValue:"",rules:{validate:function(a){return""===a||a.length>5||"Password length is more than 5"}},render:function(a){var b=a.field;return(0,l.jsx)(w.Z,(0,j.Z)({variant:"outlined",fullWidth:!0,id:"password",label:"Password",inputProps:{type:"password"},error:Boolean(H.password),helperText:H.password?"Password length is more than 5":""},b))}})}),(0,l.jsx)(t.Z,{children:(0,l.jsx)(C.Qr,{name:"confirmPassword",control:b,defaultValue:"",rules:{validate:function(a){return""===a||a.length>5||"Confirm Password length is more than 5"}},render:function(a){var b=a.field;return(0,l.jsx)(w.Z,(0,j.Z)({variant:"outlined",fullWidth:!0,id:"confirmPassword",label:"Confirm Password",inputProps:{type:"password"},error:Boolean(H.confirmPassword),helperText:H.password?"Confirm Password length is more than 5":""},b))}})}),(0,l.jsx)(t.Z,{children:(0,l.jsx)(x.Z,{variant:"contained",type:"submit",fullWidth:!0,color:"primary",children:"Update"})})]})})})]})})})]})})}b.default=f()(function(){return Promise.resolve(F)},{ssr:!1})}},function(a){a.O(0,[961,101,125,924,267,536,789,774,888,179],function(){var b;return a(a.s=9344)}),_N_E=a.O()}])