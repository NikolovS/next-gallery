(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[567],{46:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/placeorder",function(){return c(5243)}])},2913:function(c,b,a){"use strict";a.d(b,{Z:function(){return i}});var d=a(5893),e=a(5357),f=a(1594),g=a(2876);a(7294);var h=a(9629);function i(b){var a=b.activeStep,c=(0,h.Z)();return(0,d.jsx)(e.Z,{className:c.transperantBackground,activeStep:void 0===a?0:a,alternativeLabel:!0,children:["Login","Shipping Address","Payment Method","Place Order"].map(function(a){return(0,d.jsx)(f.Z,{children:(0,d.jsx)(g.Z,{children:a})},a)})})}},5243:function(i,b,a){"use strict";a.r(b);var j=a(7568),c=a(4051),k=a.n(c),l=a(5893),m=a(7294),d=a(5152),e=a.n(d),n=a(5789),o=a(8766),f=a(1664),p=a.n(f),g=a(5675),q=a.n(g),r=a(2318),s=a(1749),t=a(8463),u=a(2822),v=a(998),w=a(6847),x=a(2302),y=a(3750),z=a(7394),A=a(8222),B=a(9613),C=a(9659),D=a(282),E=a(5477),h=a(9669),F=a.n(h),G=a(1163),H=a(9629),I=a(2913),J=a(6935),K=a(1419),L=a(1955);function M(){var P,b=(0,H.Z)(),U=(0,G.useRouter)(),f=(0,J.Ds)(),V=f.closeSnackbar,W=f.enqueueSnackbar,g=(0,m.useState)(!1),Q=g[0],X=g[1],h=(0,m.useContext)(o.y),i=h.state,Y=h.dispatch,d=i.cart,M=d.cartItems,a=d.shippingAddress,R=d.paymentMethod,Z=i.userInfo,e=function(a){return Math.round(100*a+Number.EPSILON)/100},c=e(M.reduce(function(b,a){return b+a.price*a.quantity},0)),N=c>200?0:15,O=e(.2*c),S=e(c+N+O);(0,m.useEffect)(function(){R||U.push("/payment"),0===M.length&&U.push("/cart")},[]);var T=(P=(0,j.Z)(k().mark(function b(){var d;return k().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return V(),b.prev=1,X(!0),b.next=5,F().post("/api/orders",{orderItems:M,shippingAddress:a,paymentMethod:R,itemsPrice:c,shippingPrice:N,taxPrice:O,totalPrice:S},{headers:{authorization:"Bearer ".concat(Z.token)}});case 5:d=b.sent.data,Y({type:"CART_CLEAR"}),L.Z.remove("cartItems"),X(!1),U.push("/order/".concat(d._id)),b.next=16;break;case 12:b.prev=12,b.t0=b.catch(1),X(!1),W((0,K.b)(b.t0),{variant:"error"});case 16:case"end":return b.stop()}},b,null,[[1,12]])})),function(){return P.apply(this,arguments)});return(0,l.jsxs)(n.Z,{title:"Place Order",children:[(0,l.jsx)(I.Z,{activeStep:3}),(0,l.jsx)(r.Z,{component:"h1",variant:"h1",children:"Place Order"}),(0,l.jsxs)(s.Z,{container:!0,spacing:1,children:[(0,l.jsxs)(s.Z,{item:!0,md:9,xs:12,children:[(0,l.jsx)(t.Z,{className:b.section,children:(0,l.jsxs)(u.Z,{children:[(0,l.jsx)(v.Z,{children:(0,l.jsx)(r.Z,{component:"h2",variant:"h2",children:"Shipping Address"})}),(0,l.jsxs)(v.Z,{children:[a.fullName,", ",a.address,","," ",a.city,", ",a.postalCode,","," ",a.country]})]})}),(0,l.jsx)(t.Z,{className:b.section,children:(0,l.jsxs)(u.Z,{children:[(0,l.jsx)(v.Z,{children:(0,l.jsx)(r.Z,{component:"h2",variant:"h2",children:"Payment Method"})}),(0,l.jsx)(v.Z,{children:R})]})}),(0,l.jsx)(t.Z,{className:b.section,children:(0,l.jsxs)(u.Z,{children:[(0,l.jsx)(v.Z,{children:(0,l.jsx)(r.Z,{component:"h2",variant:"h2",children:"Order Items"})}),(0,l.jsx)(v.Z,{children:(0,l.jsx)(w.Z,{children:(0,l.jsxs)(x.Z,{children:[(0,l.jsx)(y.Z,{children:(0,l.jsxs)(z.Z,{children:[(0,l.jsx)(A.Z,{children:"Image"}),(0,l.jsx)(A.Z,{children:"Name"}),(0,l.jsx)(A.Z,{align:"right",children:"Quantity"}),(0,l.jsx)(A.Z,{align:"right",children:"Price"})]})}),(0,l.jsx)(B.Z,{children:M.map(function(a){return(0,l.jsxs)(z.Z,{children:[(0,l.jsx)(A.Z,{children:(0,l.jsx)(p(),{href:"/product/".concat(a.slug),passHref:!0,children:(0,l.jsx)(C.Z,{children:(0,l.jsx)(q(),{src:a.image,alt:a.name,width:50,height:50})})})}),(0,l.jsx)(A.Z,{children:(0,l.jsx)(p(),{href:"/product/".concat(a.slug),passHref:!0,children:(0,l.jsx)(C.Z,{children:(0,l.jsx)(r.Z,{children:a.name})})})}),(0,l.jsx)(A.Z,{align:"right",children:a.quantity}),(0,l.jsxs)(A.Z,{align:"right",children:["$",a.price]})]},a._id)})})]})})})]})})]}),(0,l.jsx)(s.Z,{md:3,xs:12,children:(0,l.jsx)(t.Z,{className:b.section,children:(0,l.jsxs)(u.Z,{children:[(0,l.jsx)(v.Z,{children:(0,l.jsx)(r.Z,{variant:"h2",children:"Order Summary"})}),(0,l.jsx)(v.Z,{children:(0,l.jsxs)(s.Z,{container:!0,children:[(0,l.jsx)(s.Z,{item:!0,xs:6,children:(0,l.jsx)(r.Z,{children:"Items:"})}),(0,l.jsx)(s.Z,{item:!0,xs:6,children:(0,l.jsxs)(r.Z,{align:"right",children:["$",c]})})]})}),(0,l.jsx)(v.Z,{children:(0,l.jsxs)(s.Z,{container:!0,children:[(0,l.jsx)(s.Z,{item:!0,xs:6,children:(0,l.jsx)(r.Z,{children:"Tax:"})}),(0,l.jsx)(s.Z,{item:!0,xs:6,children:(0,l.jsxs)(r.Z,{align:"right",children:["$",O]})})]})}),(0,l.jsx)(v.Z,{children:(0,l.jsxs)(s.Z,{container:!0,children:[(0,l.jsx)(s.Z,{item:!0,xs:6,children:(0,l.jsx)(r.Z,{children:"Shipping:"})}),(0,l.jsx)(s.Z,{item:!0,xs:6,children:(0,l.jsxs)(r.Z,{align:"right",children:["$",N]})})]})}),(0,l.jsx)(v.Z,{children:(0,l.jsxs)(s.Z,{container:!0,children:[(0,l.jsx)(s.Z,{item:!0,xs:6,children:(0,l.jsx)(r.Z,{children:(0,l.jsx)("strong",{children:"Total:"})})}),(0,l.jsx)(s.Z,{item:!0,xs:6,children:(0,l.jsx)(r.Z,{align:"right",children:(0,l.jsxs)("strong",{children:["$",S]})})})]})}),(0,l.jsx)(v.Z,{children:(0,l.jsx)(D.Z,{onClick:T,variant:"contained",color:"primary",fullWidth:!0,children:"Place Order"})}),Q&&(0,l.jsx)(v.Z,{children:(0,l.jsx)(E.Z,{})})]})})})]})]})}b.default=e()(function(){return Promise.resolve(M)},{ssr:!1})}},function(a){a.O(0,[961,101,125,675,324,646,789,774,888,179],function(){var b;return a(a.s=46)}),_N_E=a.O()}])