(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[478],{263:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/user/[id]",function(){return c(5276)}])},5276:function(h,b,a){"use strict";a.r(b),a.d(b,{"__N_SSP":function(){return K}});var i=a(7568),j=a(6042),k=a(9396),c=a(4051),l=a.n(c),m=a(5893),d=a(9669),n=a.n(d),e=a(5152),f=a.n(e),o=a(1163),g=a(1664),p=a.n(g),q=a(7294),r=a(1749),s=a(8463),t=a(2822),u=a(998),v=a(5757),w=a(2318),x=a(5477),y=a(8101),z=a(553),A=a(797),B=a(282),C=a(1419),D=a(8766),E=a(5789),F=a(9629),G=a(7536),H=a(6935);function I(a,b){switch(b.type){case"FETCH_REQUEST":return(0,k.Z)((0,j.Z)({},a),{loading:!0,error:""});case"FETCH_SUCCESS":return(0,k.Z)((0,j.Z)({},a),{loading:!1,error:""});case"FETCH_FAIL":return(0,k.Z)((0,j.Z)({},a),{loading:!1,error:b.payload});case"UPDATE_REQUEST":return(0,k.Z)((0,j.Z)({},a),{loadingUpdate:!0,errorUpdate:""});case"UPDATE_SUCCESS":return(0,k.Z)((0,j.Z)({},a),{loadingUpdate:!1,errorUpdate:""});case"UPDATE_FAIL":return(0,k.Z)((0,j.Z)({},a),{loadingUpdate:!1,errorUpdate:b.payload});case"UPLOAD_REQUEST":return(0,k.Z)((0,j.Z)({},a),{loadingUpload:!0,errorUpload:""});case"UPLOAD_SUCCESS":return(0,k.Z)((0,j.Z)({},a),{loadingUpload:!1,errorUpload:""});case"UPLOAD_FAIL":return(0,k.Z)((0,j.Z)({},a),{loadingUpload:!1,errorUpload:b.payload});default:return a}}function J(k){var J,d=k.params.id,K=(0,q.useContext)(D.y).state,e=(0,q.useReducer)(I,{loading:!0,error:""}),c=e[0],L=c.loading,f=c.error,M=c.loadingUpdate,R=e[1],a=(0,G.cI)(),N=a.handleSubmit,O=a.control,S=a.formState.errors,T=a.setValue,g=(0,q.useState)(!1),P=g[0],U=g[1],h=(0,H.Ds)(),V=h.enqueueSnackbar,W=h.closeSnackbar,X=(0,o.useRouter)(),b=(0,F.Z)(),Y=K.userInfo;(0,q.useEffect)(function(){var a;if(!Y)return X.push("/login");(a=(0,i.Z)(l().mark(function a(){var b;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,R({type:"FETCH_REQUEST"}),a.next=4,n().get("/api/admin/users/".concat(d),{headers:{authorization:"Bearer ".concat(Y.token)}});case 4:U((b=a.sent.data).isAdmin),R({type:"FETCH_SUCCESS"}),T("name",b.name),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),R({type:"FETCH_FAIL",payload:(0,C.b)(a.t0)});case 13:case"end":return a.stop()}},a,null,[[0,10]])})),function(){return a.apply(this,arguments)})()},[]);var Q=(J=(0,i.Z)(l().mark(function a(b){var c;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=b.name,W(),a.prev=2,R({type:"UPDATE_REQUEST"}),a.next=6,n().put("/api/admin/users/".concat(d),{name:c,isAdmin:P},{headers:{authorization:"Bearer ".concat(Y.token)}});case 6:R({type:"UPDATE_SUCCESS"}),V("User updated successfully",{variant:"success"}),X.push("/admin/users"),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(2),R({type:"UPDATE_FAIL",payload:(0,C.b)(a.t0)}),V((0,C.b)(a.t0),{variant:"error"});case 15:case"end":return a.stop()}},a,null,[[2,11]])})),function(a){return J.apply(this,arguments)});return(0,m.jsx)(E.Z,{title:"Edit User ".concat(d),children:(0,m.jsxs)(r.Z,{container:!0,spacing:1,children:[(0,m.jsx)(r.Z,{item:!0,md:3,xs:12,children:(0,m.jsx)(s.Z,{className:b.section,children:(0,m.jsxs)(t.Z,{children:[(0,m.jsx)(p(),{href:"/admin/dashboard",passHref:!0,children:(0,m.jsx)(u.Z,{button:!0,component:"a",children:(0,m.jsx)(v.Z,{primary:"Admin Dashboard"})})}),(0,m.jsx)(p(),{href:"/admin/orders",passHref:!0,children:(0,m.jsx)(u.Z,{button:!0,component:"a",children:(0,m.jsx)(v.Z,{primary:"Orders"})})}),(0,m.jsx)(p(),{href:"/admin/products",passHref:!0,children:(0,m.jsx)(u.Z,{button:!0,component:"a",children:(0,m.jsx)(v.Z,{primary:"Products"})})}),(0,m.jsx)(p(),{href:"/admin/users",passHref:!0,children:(0,m.jsx)(u.Z,{selected:!0,button:!0,component:"a",children:(0,m.jsx)(v.Z,{primary:"Users"})})})]})})}),(0,m.jsx)(r.Z,{item:!0,md:9,xs:12,children:(0,m.jsx)(s.Z,{className:b.section,children:(0,m.jsxs)(t.Z,{children:[(0,m.jsx)(u.Z,{children:(0,m.jsxs)(w.Z,{component:"h1",variant:"h1",children:["Edit User ",d]})}),(0,m.jsxs)(u.Z,{children:[L&&(0,m.jsx)(x.Z,{}),f&&(0,m.jsx)(w.Z,{className:b.error,children:f})]}),(0,m.jsx)(u.Z,{children:(0,m.jsx)("form",{onSubmit:N(Q),className:b.form,children:(0,m.jsxs)(t.Z,{children:[(0,m.jsx)(u.Z,{children:(0,m.jsx)(G.Qr,{name:"name",control:O,defaultValue:"",rules:{required:!0},render:function(a){var b=a.field;return(0,m.jsx)(y.Z,(0,j.Z)({variant:"outlined",fullWidth:!0,id:"name",label:"Name",error:Boolean(S.name),helperText:S.name?"Name is required":""},b))}})}),(0,m.jsx)(u.Z,{children:(0,m.jsx)(z.Z,{label:"Is Admin",control:(0,m.jsx)(A.Z,{onClick:function(a){return U(a.target.checked)},checked:P,name:"isAdmin"})})}),(0,m.jsxs)(u.Z,{children:[(0,m.jsx)(B.Z,{variant:"contained",type:"submit",fullWidth:!0,color:"primary",children:"Update"}),M&&(0,m.jsx)(x.Z,{})]})]})})})]})})})]})})}var K=!0;b.default=f()(function(){return Promise.resolve(J)},{ssr:!1})}},function(a){a.O(0,[961,48,170,924,101,536,522,789,774,888,179],function(){var b;return a(a.s=263)}),_N_E=a.O()}])