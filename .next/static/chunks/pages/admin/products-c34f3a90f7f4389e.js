(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[209],{5477:function(f,b,a){"use strict";var g=a(7462),h=a(5987),c=a(7294),i=a(6010),d=a(1591),j=a(3871),e=c.forwardRef(function(b,w){var a=b.classes,x=b.className,k=b.color,l=void 0===k?"primary":k,m=b.disableShrink,n=b.size,o=void 0===n?40:n,y=b.style,p=b.thickness,e=void 0===p?3.6:p,q=b.value,r=void 0===q?0:q,s=b.variant,d=void 0===s?"indeterminate":s,z=(0,h.Z)(b,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),f={},t={},u={};if("determinate"===d||"static"===d){var v=2*Math.PI*((44-e)/2);f.strokeDasharray=v.toFixed(3),u["aria-valuenow"]=Math.round(r),f.strokeDashoffset="".concat(((100-r)/100*v).toFixed(3),"px"),t.transform="rotate(-90deg)"}return c.createElement("div",(0,g.Z)({className:(0,i.Z)(a.root,x,"inherit"!==l&&a["color".concat((0,j.Z)(l))],{determinate:a.determinate,indeterminate:a.indeterminate,static:a.static}[d]),style:(0,g.Z)({width:o,height:o},t,y),ref:w,role:"progressbar"},u,z),c.createElement("svg",{className:a.svg,viewBox:"".concat(22," ").concat(22," ").concat(44," ").concat(44)},c.createElement("circle",{className:(0,i.Z)(a.circle,void 0!==m&&m&&a.circleDisableShrink,{determinate:a.circleDeterminate,indeterminate:a.circleIndeterminate,static:a.circleStatic}[d]),style:f,cx:44,cy:44,r:(44-e)/2,fill:"none",strokeWidth:e})))});b.Z=(0,d.Z)(function(a){return{root:{display:"inline-block"},static:{transition:a.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:a.transitions.create("transform")},colorPrimary:{color:a.palette.primary.main},colorSecondary:{color:a.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:a.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:a.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}},{name:"MuiCircularProgress",flip:!1})(e)},2678:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/products",function(){return c(8626)}])},8626:function(h,b,a){"use strict";a.r(b);var i=a(7568),j=a(6042),k=a(9396),c=a(4051),l=a.n(c),m=a(5893),d=a(9669),n=a.n(d),e=a(5152),f=a.n(e),o=a(1163),g=a(1664),p=a.n(g),q=a(7294),r=a(1749),s=a(8463),t=a(2822),u=a(998),v=a(5757),w=a(2318),x=a(5477),y=a(282),z=a(6847),A=a(2302),B=a(3750),C=a(7394),D=a(8222),E=a(9613),F=a(1419),G=a(8766),H=a(5789),I=a(9629),J=a(6935);function K(a,b){switch(b.type){case"FETCH_REQUEST":return(0,k.Z)((0,j.Z)({},a),{loading:!0,error:""});case"FETCH_SUCCESS":return(0,k.Z)((0,j.Z)({},a),{loading:!1,products:b.payload,error:""});case"FETCH_FAIL":return(0,k.Z)((0,j.Z)({},a),{loading:!1,error:b.payload});case"CREATE_REQUEST":return(0,k.Z)((0,j.Z)({},a),{loadingCreate:!0});case"CREATE_SUCCESS":case"CREATE_FAIL":return(0,k.Z)((0,j.Z)({},a),{loadingCreate:!1});case"DELETE_REQUEST":return(0,k.Z)((0,j.Z)({},a),{loadingDelete:!0});case"DELETE_SUCCESS":return(0,k.Z)((0,j.Z)({},a),{loadingDelete:!1,successDelete:!0});case"DELETE_FAIL":return(0,k.Z)((0,j.Z)({},a),{loadingDelete:!1});case"DELETE_RESET":return(0,k.Z)((0,j.Z)({},a),{loadingDelete:!1,successDelete:!1})}}function L(){var e=(0,q.useContext)(G.y).state,O=(0,o.useRouter)(),b=(0,I.Z)(),P=e.userInfo,c=(0,q.useReducer)(K,{loading:!0,products:[],error:""}),a=c[0],f=a.loading,d=a.error,g=a.products,h=a.loadingCreate,j=a.successDelete,k=a.loadingDelete,Q=c[1];(0,q.useEffect)(function(){P||O.push("/login");var a,b=(a=(0,i.Z)(l().mark(function a(){var b;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,Q({type:"FETCH_REQUEST"}),a.next=4,n().get("/api/admin/products",{headers:{authorization:"Bearer ".concat(P.token)}});case 4:Q({type:"FETCH_SUCCESS",payload:b=a.sent.data}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),Q({type:"FETCH_FAIL",payload:(0,F.b)(a.t0)});case 11:case"end":return a.stop()}},a,null,[[0,8]])})),function(){return a.apply(this,arguments)});j?Q({type:"DELETE_RESET"}):b()},[j]);var L,M,R=(0,J.Ds)().enqueueSnackbar,N=(L=(0,i.Z)(l().mark(function a(){var b;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(window.confirm("Are you sure?")){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,Q({type:"CREATE_REQUEST"}),a.next=6,n().post("/api/admin/products",{},{headers:{authorization:"Bearer ".concat(P.token)}});case 6:b=a.sent.data,Q({type:"CREATE_SUCCESS"}),R("Product created successfully",{variant:"success"}),O.push("/admin/product/".concat(b.product._id)),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(2),Q({type:"CREATE_FAIL"}),R((0,F.b)(a.t0),{variant:"error"});case 16:case"end":return a.stop()}},a,null,[[2,12]])})),function(){return L.apply(this,arguments)}),S=(M=(0,i.Z)(l().mark(function a(b){return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(window.confirm("Are you sure?")){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,Q({type:"DELETE_REQUEST"}),a.next=6,n().delete("/api/admin/products/".concat(b),{headers:{authorization:"Bearer ".concat(P.token)}});case 6:Q({type:"DELETE_SUCCESS"}),R("Product deleted successfully",{variant:"success"}),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(2),Q({type:"DELETE_FAIL"}),R((0,F.b)(a.t0),{variant:"error"});case 14:case"end":return a.stop()}},a,null,[[2,10]])})),function(a){return M.apply(this,arguments)});return(0,m.jsx)(H.Z,{title:"Products",children:(0,m.jsxs)(r.Z,{container:!0,spacing:1,children:[(0,m.jsx)(r.Z,{item:!0,md:3,xs:12,children:(0,m.jsx)(s.Z,{className:b.section,children:(0,m.jsxs)(t.Z,{children:[(0,m.jsx)(p(),{href:"/admin/dashboard",passHref:!0,children:(0,m.jsx)(u.Z,{button:!0,component:"a",children:(0,m.jsx)(v.Z,{primary:"Admin Dashboard"})})}),(0,m.jsx)(p(),{href:"/admin/orders",passHref:!0,children:(0,m.jsx)(u.Z,{button:!0,component:"a",children:(0,m.jsx)(v.Z,{primary:"Orders"})})}),(0,m.jsx)(p(),{href:"/admin/products",passHref:!0,children:(0,m.jsx)(u.Z,{selected:!0,button:!0,component:"a",children:(0,m.jsx)(v.Z,{primary:"Products"})})})]})})}),(0,m.jsx)(r.Z,{item:!0,md:9,xs:12,children:(0,m.jsx)(s.Z,{className:b.section,children:(0,m.jsxs)(t.Z,{children:[(0,m.jsx)(u.Z,{children:(0,m.jsxs)(r.Z,{container:!0,alignItems:"center",children:[(0,m.jsxs)(r.Z,{item:!0,xs:6,children:[(0,m.jsx)(w.Z,{component:"h1",variant:"h1",children:"Products"}),k&&(0,m.jsx)(x.Z,{})]}),(0,m.jsxs)(r.Z,{align:"right",item:!0,xs:6,children:[(0,m.jsx)(y.Z,{onClick:N,color:"primary",variant:"contained",children:"Create"}),h&&(0,m.jsx)(x.Z,{})]})]})}),(0,m.jsx)(u.Z,{children:f?(0,m.jsx)(x.Z,{}):d?(0,m.jsx)(w.Z,{className:b.error,children:d}):(0,m.jsx)(z.Z,{children:(0,m.jsxs)(A.Z,{children:[(0,m.jsx)(B.Z,{children:(0,m.jsxs)(C.Z,{children:[(0,m.jsx)(D.Z,{children:"ID"}),(0,m.jsx)(D.Z,{children:"NAME"}),(0,m.jsx)(D.Z,{children:"PRICE"}),(0,m.jsx)(D.Z,{children:"CATEGORY"}),(0,m.jsx)(D.Z,{children:"COUNT"}),(0,m.jsx)(D.Z,{children:"RATING"}),(0,m.jsx)(D.Z,{children:"ACTIONS"})]})}),(0,m.jsx)(E.Z,{children:g.map(function(a){return(0,m.jsxs)(C.Z,{children:[(0,m.jsx)(D.Z,{children:a._id.substring(20,24)}),(0,m.jsx)(D.Z,{children:a.name}),(0,m.jsxs)(D.Z,{children:["$",a.price]}),(0,m.jsx)(D.Z,{children:a.category}),(0,m.jsx)(D.Z,{children:a.countInStock}),(0,m.jsx)(D.Z,{children:a.rating}),(0,m.jsxs)(D.Z,{children:[(0,m.jsx)(p(),{href:"/admin/product/".concat(a._id),passHref:!0,children:(0,m.jsx)(y.Z,{size:"small",variant:"contained",children:"Edit"})})," ",(0,m.jsx)(y.Z,{onClick:function(){return S(a._id)},size:"small",variant:"contained",children:"Delete"})]})]},a._id)})})]})})})]})})})]})})}b.default=f()(function(){return Promise.resolve(L)},{ssr:!1})}},function(a){a.O(0,[961,48,170,349,789,774,888,179],function(){var b;return a(a.s=2678)}),_N_E=a.O()}])