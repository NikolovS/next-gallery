(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{5477:function(f,b,a){"use strict";var g=a(7462),h=a(5987),c=a(7294),i=a(6010),d=a(1591),j=a(3871),e=c.forwardRef(function(b,w){var a=b.classes,x=b.className,k=b.color,l=void 0===k?"primary":k,m=b.disableShrink,n=b.size,o=void 0===n?40:n,y=b.style,p=b.thickness,e=void 0===p?3.6:p,q=b.value,r=void 0===q?0:q,s=b.variant,d=void 0===s?"indeterminate":s,z=(0,h.Z)(b,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),f={},t={},u={};if("determinate"===d||"static"===d){var v=2*Math.PI*((44-e)/2);f.strokeDasharray=v.toFixed(3),u["aria-valuenow"]=Math.round(r),f.strokeDashoffset="".concat(((100-r)/100*v).toFixed(3),"px"),t.transform="rotate(-90deg)"}return c.createElement("div",(0,g.Z)({className:(0,i.Z)(a.root,x,"inherit"!==l&&a["color".concat((0,j.Z)(l))],{determinate:a.determinate,indeterminate:a.indeterminate,static:a.static}[d]),style:(0,g.Z)({width:o,height:o},t,y),ref:w,role:"progressbar"},u,z),c.createElement("svg",{className:a.svg,viewBox:"".concat(22," ").concat(22," ").concat(44," ").concat(44)},c.createElement("circle",{className:(0,i.Z)(a.circle,void 0!==m&&m&&a.circleDisableShrink,{determinate:a.circleDeterminate,indeterminate:a.circleIndeterminate,static:a.circleStatic}[d]),style:f,cx:44,cy:44,r:(44-e)/2,fill:"none",strokeWidth:e})))});b.Z=(0,d.Z)(function(a){return{root:{display:"inline-block"},static:{transition:a.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:a.transitions.create("transform")},colorPrimary:{color:a.palette.primary.main},colorSecondary:{color:a.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:a.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:a.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}},{name:"MuiCircularProgress",flip:!1})(e)},7607:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/[slug]",function(){return c(8846)}])},8846:function(g,b,a){"use strict";a.r(b),a.d(b,{"__N_SSP":function(){return G},default:function(){return H}});var h=a(7568),i=a(6042),j=a(9396),c=a(4051),k=a.n(c),l=a(5893),m=a(7294),d=a(9669),n=a.n(d),o=a(5789),e=a(1664),p=a.n(e),q=a(9659),r=a(1749),s=a(2822),t=a(998),u=a(2318),v=a(8463),w=a(282),x=a(8101),y=a(5477),z=a(9629),f=a(5675),A=a.n(f),B=a(8766),C=a(1163),D=a(6935),E=a(1419),F=a(7926),G=!0;function H(H){var I,J,S=(0,C.useRouter)(),b=(0,m.useContext)(B.y),K=b.state,T=b.dispatch,c=(0,z.Z)(),a=H.product,L=K.userInfo,U=(0,D.Ds)().enqueueSnackbar,d=(0,m.useState)([]),e=d[0],V=d[1],f=(0,m.useState)(0),M=f[0],W=f[1],g=(0,m.useState)(""),N=g[0],X=g[1],G=(0,m.useState)(!1),O=G[0],Y=G[1],P=(I=(0,h.Z)(k().mark(function b(c){return k().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return c.preventDefault(),Y(!0),b.prev=2,b.next=5,n().post("/api/products/".concat(a._id,"/reviews"),{rating:M,comment:N},{headers:{authorization:"Bearer ".concat(L.token)}});case 5:Y(!1),U("Review submitted successfully",{variant:"success"}),Z(),b.next=14;break;case 10:b.prev=10,b.t0=b.catch(2),Y(!1),U((0,E.b)(b.t0),{variant:"error"});case 14:case"end":return b.stop()}},b,null,[[2,10]])})),function(a){return I.apply(this,arguments)}),Z=(J=(0,h.Z)(k().mark(function b(){var c;return k().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,b.next=3,n().get("/api/products/".concat(a._id,"/reviews"));case 3:V(c=b.sent.data),b.next=10;break;case 7:b.prev=7,b.t0=b.catch(0),U((0,E.b)(b.t0),{variant:"error"});case 10:case"end":return b.stop()}},b,null,[[0,7]])})),function(){return J.apply(this,arguments)});if((0,m.useEffect)(function(){Z()},[]),!a)return(0,l.jsx)("div",{children:"Product Not Found"});var Q,R=(Q=(0,h.Z)(k().mark(function b(){var c,d,e;return k().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return d=(c=K.cart.cartItems.find(function(b){return b._id===a._id}))?c.quantity+1:1,b.next=4,n().get("/api/products/".concat(a._id));case 4:if(!((e=b.sent.data).countInStock<d)){b.next=8;break}return window.alert("Sorry, Product is out of stock."),b.abrupt("return");case 8:T({type:"CART_ADD_ITEM",payload:(0,j.Z)((0,i.Z)({},a),{quantity:d})}),S.push("/cart");case 10:case"end":return b.stop()}},b)})),function(){return Q.apply(this,arguments)});return(0,l.jsxs)(o.Z,{title:a.name,description:a.description,children:[(0,l.jsx)("div",{className:c.section,children:(0,l.jsx)(p(),{href:"/",passHref:!0,children:(0,l.jsx)(q.Z,{children:"back to products"})})}),(0,l.jsxs)(r.Z,{container:!0,spacing:1,children:[(0,l.jsx)(r.Z,{item:!0,md:6,xs:12,children:(0,l.jsx)(A(),{src:a.image,alt:a.name,width:640,height:640,layout:"responsive"})}),(0,l.jsx)(r.Z,{item:!0,md:3,xs:12,children:(0,l.jsxs)(s.Z,{children:[(0,l.jsx)(t.Z,{children:(0,l.jsx)(u.Z,{component:"h1",variant:"h1",children:a.name})}),(0,l.jsx)(t.Z,{children:(0,l.jsxs)(u.Z,{children:["Category: ",a.category]})}),(0,l.jsx)(t.Z,{children:(0,l.jsxs)(u.Z,{children:["Brand: ",a.brand]})}),(0,l.jsxs)(t.Z,{children:[(0,l.jsx)(F.Z,{value:a.rating,readOnly:!0}),(0,l.jsx)(q.Z,{href:"#reviews",children:(0,l.jsxs)(u.Z,{children:["(",a.numReviews," reviews)"]})})]}),(0,l.jsx)(t.Z,{children:(0,l.jsxs)(u.Z,{children:[" Description: ",a.description]})})]})}),(0,l.jsx)(r.Z,{item:!0,md:3,xs:12,children:(0,l.jsx)(v.Z,{children:(0,l.jsxs)(s.Z,{children:[(0,l.jsx)(t.Z,{children:(0,l.jsxs)(r.Z,{container:!0,children:[(0,l.jsx)(r.Z,{item:!0,xs:6,children:(0,l.jsx)(u.Z,{children:"Price"})}),(0,l.jsx)(r.Z,{item:!0,xs:6,children:(0,l.jsxs)(u.Z,{children:["$",a.price]})})]})}),(0,l.jsx)(t.Z,{children:(0,l.jsxs)(r.Z,{container:!0,children:[(0,l.jsx)(r.Z,{item:!0,xs:6,children:(0,l.jsx)(u.Z,{children:"Status"})}),(0,l.jsx)(r.Z,{item:!0,xs:6,children:(0,l.jsx)(u.Z,{children:a.countInStock>0?"In stock":"Unavailable"})})]})}),(0,l.jsx)(t.Z,{children:(0,l.jsx)(w.Z,{fullWidth:!0,variant:"contained",color:"primary",onClick:R,children:"Add to cart"})})]})})})]}),(0,l.jsxs)(s.Z,{children:[(0,l.jsx)(t.Z,{children:(0,l.jsx)(u.Z,{name:"reviews",id:"reviews",variant:"h2",children:"Customer Reviews"})}),0===e.length&&(0,l.jsx)(t.Z,{children:"No review"}),e.map(function(a){return(0,l.jsx)(t.Z,{children:(0,l.jsxs)(r.Z,{container:!0,children:[(0,l.jsxs)(r.Z,{item:!0,className:c.reviewItem,children:[(0,l.jsx)(u.Z,{children:(0,l.jsx)("strong",{children:a.name})}),(0,l.jsx)(u.Z,{children:a.createdAt.substring(0,10)})]}),(0,l.jsxs)(r.Z,{item:!0,children:[(0,l.jsx)(F.Z,{value:a.rating,readOnly:!0}),(0,l.jsx)(u.Z,{children:a.comment})]})]})},a._id)}),(0,l.jsx)(t.Z,{children:L?(0,l.jsx)("form",{onSubmit:P,className:c.reviewForm,children:(0,l.jsxs)(s.Z,{children:[(0,l.jsx)(t.Z,{children:(0,l.jsx)(u.Z,{variant:"h2",children:"Leave your review"})}),(0,l.jsx)(t.Z,{children:(0,l.jsx)(x.Z,{multiline:!0,variant:"outlined",fullWidth:!0,name:"review",label:"Enter comment",value:N,onChange:function(a){return X(a.target.value)}})}),(0,l.jsx)(t.Z,{children:(0,l.jsx)(F.Z,{name:"simple-controlled",value:M,onChange:function(a){return W(a.target.value)}})}),(0,l.jsxs)(t.Z,{children:[(0,l.jsx)(w.Z,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Submit"}),O&&(0,l.jsx)(y.Z,{})]})]})}):(0,l.jsxs)(u.Z,{variant:"h2",children:["Please"," ",(0,l.jsx)(q.Z,{href:"/login?redirect=/product/".concat(a.slug),children:"login"})," ","to write a review"]})})]})]})}}},function(a){a.O(0,[961,101,924,267,675,971,789,774,888,179],function(){var b;return a(a.s=7607)}),_N_E=a.O()}])